<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<title>Ahmet Tekeli Erkek Kuaf√∂r√º ‚Ä¢ Randevu Sistemi</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#f4f5fb;
  --card:#ffffff;
  --blue:#2196f3;
  --blue-soft:#e3f2fd;
  --blue-dark:#1565c0;
  --green:#2e7d32;
  --green-soft:#e8f5e9;
  --red:#e53935;
  --red-soft:#ffebee;
  --purple:#7c4dff;
  --ink:#111827;
  --muted:#6b7280;
  --border:#e5e7eb;
  --shadow:0 14px 35px rgba(15,23,42,.18);
  --radius-lg:26px;
  --radius-md:18px;
  --radius-sm:12px;
}

*{box-sizing:border-box;margin:0;padding:0}
html,body{
  font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  background:var(--bg);
  color:var(--ink);
}

/* ==== APP WRAP ==== */
.app{
  max-width:430px;
  margin:0 auto;
  min-height:100vh;
  display:flex;
  align-items:flex-start;
  justify-content:center;
  padding:18px 12px 32px;
}

/* simple mobile frame look */
.phone{
  width:100%;
  background:#fdfdff;
  border-radius:32px;
  box-shadow:0 20px 50px rgba(15,23,42,.25);
  overflow:hidden;
  position:relative;
}

/* top fake status bar */
.phone-header{
  height:52px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:13px;
  font-weight:500;
  color:#6b7280;
  background:linear-gradient(135deg,#e0f2fe,#f3e8ff);
}

/* ==== SCREENS ==== */
.screen{
  padding:18px 18px 22px;
  max-height:calc(100vh - 52px);
  overflow-y:auto;
}
.hidden{display:none}

/* ==== LOGIN ==== */
.login-card{
  background:linear-gradient(145deg,#1e88e5,#42a5f5);
  border-radius:var(--radius-lg);
  padding:26px 22px 32px;
  color:#fff;
  box-shadow:var(--shadow);
  margin-bottom:18px;
}
.login-logo{
  display:flex;
  align-items:center;
  gap:10px;
  margin-bottom:18px;
}
.logo-icon{
  width:40px;height:40px;
  border-radius:14px;
  background:rgba(255,255,255,.13);
  display:flex;align-items:center;justify-content:center;
  font-size:22px;
}
.logo-text{
  line-height:1.25;
}
.logo-text strong{
  display:block;
  font-size:17px;
  letter-spacing:.04em;
}
.logo-text span{
  font-size:13px;
  opacity:.9;
}

.login-card h2{
  font-size:20px;
  margin-bottom:6px;
}
.login-card p{
  font-size:13px;
  opacity:.9;
  margin-bottom:18px;
}

.field{
  background:rgba(255,255,255,.96);
  border-radius:16px;
  padding:10px 12px 4px;
  margin-bottom:12px;
  color:#111827;
}
.field-label{
  font-size:11px;
  color:#6b7280;
}
.field-inner{
  display:flex;
  align-items:center;
  gap:8px;
}
.field-inner span{
  font-size:16px;
  opacity:.7;
}
.field-inner input{
  border:none;
  outline:none;
  padding:6px 2px 8px;
  width:100%;
  font-size:14px;
  background:transparent;
}

.login-bottom-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin:4px 2px 18px;
  font-size:12px;
}
.login-bottom-row a{
  color:#fefefe;
  text-decoration:underline;
}

.btn{
  border:none;
  outline:none;
  cursor:pointer;
  border-radius:999px;
  padding:11px 18px;
  font-size:15px;
  font-weight:600;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:6px;
  transition:.18s transform,.18s box-shadow,.18s background;
}
.btn-primary{
  width:100%;
  background:linear-gradient(135deg,#1e88e5,#42a5f5);
  color:#fff;
  box-shadow:0 8px 25px rgba(33,150,243,.4);
}
.btn-primary:active{
  transform:translateY(1px);
  box-shadow:0 4px 14px rgba(33,150,243,.45);
}
.btn-outline{
  background:transparent;
  color:var(--blue-dark);
  border:1px solid rgba(37,99,235,.3);
}

/* login footer row */
.login-footer{
  padding:6px 4px 4px;
  font-size:13px;
  display:flex;
  justify-content:space-between;
}
.login-footer span{color:#4b5563}
.login-footer a{
  color:#1d4ed8;
  font-weight:600;
  text-decoration:none;
}

/* ==== DASHBOARD HEADER ==== */
.appbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:14px;
}
.appbar-title{
  display:flex;
  flex-direction:column;
}
.appbar-title small{
  font-size:11px;
  color:var(--muted);
}
.appbar-title strong{
  font-size:18px;
}
.appbar-actions{
  display:flex;
  align-items:center;
  gap:8px;
}
.icon-btn{
  width:34px;height:34px;
  border-radius:14px;
  border:none;
  background:#e5f1ff;
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
  cursor:pointer;
}
.icon-btn.logout{
  background:#ffebee;
}
.icon-btn span{
  font-size:18px;
}
.badge{
  position:absolute;
  top:-5px;right:-4px;
  min-width:16px;
  height:16px;
  border-radius:999px;
  background:#ef4444;
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:10px;
  padding:0 3px;
}

/* ==== TOP TABS ==== */
.tabs{
  display:flex;
  background:#f1f5f9;
  border-radius:22px;
  padding:4px;
  gap:4px;
  margin-bottom:16px;
}
.tab-btn{
  flex:1;
  border:none;
  border-radius:16px;
  padding:7px 4px 8px;
  font-size:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:5px;
  color:#4b5563;
  background:transparent;
  cursor:pointer;
}
.tab-btn span.icon{
  font-size:15px;
}
.tab-btn.active{
  background:#ffffff;
  color:#111827;
  box-shadow:0 3px 9px rgba(15,23,42,.12);
}

/* ==== PANELS GENERAL ==== */
.section{
  background:var(--card);
  border-radius:var(--radius-lg);
  box-shadow:0 12px 30px rgba(15,23,42,.12);
  padding:16px 14px 18px;
  margin-bottom:16px;
}
.section-title{
  font-size:15px;
  font-weight:600;
  margin-bottom:6px;
}
.section-sub{
  font-size:12px;
  color:var(--muted);
  margin-bottom:10px;
}

/* info banner */
.info-banner{
  border-radius:14px;
  padding:10px 10px;
  font-size:12px;
  display:flex;
  gap:8px;
  background:#e8f5e9;
  color:#166534;
  margin-bottom:12px;
}
.info-banner.red{
  background:#ffebee;
  color:#b91c1c;
}
.info-icon{
  font-size:16px;
}

/* ==== STAFF CARDS ==== */
.chip-list{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}
.staff-card{
  flex:1 1 100%;
  background:linear-gradient(135deg,#1e88e5,#42a5f5);
  color:#fff;
  border-radius:var(--radius-md);
  padding:12px 12px 10px;
  margin-top:10px;
}
.staff-header{
  display:flex;
  align-items:center;
  gap:10px;
  margin-bottom:6px;
}
.staff-avatar{
  width:40px;height:40px;border-radius:50%;overflow:hidden;
  background:rgba(255,255,255,.18);
  display:flex;align-items:center;justify-content:center;
  font-weight:600;
}
.staff-avatar img{width:100%;height:100%;object-fit:cover}
.staff-name{
  font-size:14px;
  font-weight:600;
}
.staff-services{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  margin-bottom:10px;
}
.pill{
  padding:4px 9px;
  border-radius:999px;
  font-size:11px;
  background:rgba(255,255,255,.18);
}
.card-actions{
  display:flex;
  gap:8px;
}
.btn-xs{
  font-size:12px;
  padding:7px 10px;
  border-radius:999px;
  border:none;
  cursor:pointer;
}
.btn-xs.edit{
  background:#ffffff;
  color:#1e88e5;
}
.btn-xs.delete{
  background:#ffebee;
  color:#b91c1c;
}

/* ==== SERVICE & PRODUCT CARDS ==== */
.grid-2{
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:10px;
}
.service-card,
.product-card{
  border-radius:18px;
  padding:10px 10px 9px;
  background:var(--blue-soft);
  cursor:pointer;
  position:relative;
}
.service-card.selected,
.product-card.selected{
  outline:2px solid var(--blue-dark);
}
.service-icon{
  font-size:24px;margin-bottom:4px;
}
.service-name{
  font-size:13px;
  font-weight:600;
  margin-bottom:2px;
}
.service-price{
  font-size:12px;
  color:#1f2933;
}
.service-duration{
  font-size:11px;
  color:#6b7280;
}

.product-thumb{
  width:32px;height:32px;
  border-radius:12px;
  background:#fff;
  margin-bottom:4px;
  display:flex;align-items:center;justify-content:center;
  font-size:18px;
}
.product-name{
  font-size:12px;
  font-weight:600;
}
.product-price{
  font-size:12px;
}
.product-stock{
  font-size:11px;
  margin-top:2px;
  color:#374151;
}

/* small danger badge */
.badge-sm{
  position:absolute;
  top:8px;right:8px;
  font-size:10px;
  background:#f97316;
  color:#fff;
  padding:2px 7px;
  border-radius:999px;
}

/* ==== HOURS ==== */
.hours-list{
  display:flex;
  flex-direction:column;
  gap:8px;
}
.hour-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:8px 10px;
  border-radius:14px;
  background:#f1f5f9;
}
.hour-left{
  display:flex;
  align-items:center;
  gap:6px;
  font-size:13px;
}
.hour-toggle{
  padding:4px 10px;
  font-size:11px;
  border-radius:999px;
  border:none;
  cursor:pointer;
}
.hour-toggle.on{
  background:#dbeafe;
  color:#1d4ed8;
}
.hour-toggle.off{
  background:#fee2e2;
  color:#b91c1c;
}
.hour-time{
  font-size:12px;
  color:#4b5563;
}

/* ==== RESERVATION FLOW ==== */
.staff-chooser{
  display:flex;
  gap:10px;
}
.staff-pill{
  flex:1;
  border-radius:18px;
  padding:8px 10px;
  background:#e0f2fe;
  display:flex;
  flex-direction:column;
  gap:2px;
  align-items:flex-start;
  cursor:pointer;
}
.staff-pill span:first-child{
  font-size:12px;
  color:#6b7280;
}
.staff-pill strong{
  font-size:14px;
}
.staff-pill.active{
  background:#1d4ed8;
  color:#fff;
}

.total-box{
  margin-top:10px;
  padding:9px 12px;
  border-radius:14px;
  background:var(--green-soft);
  color:#064e3b;
  font-size:13px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

/* date / time chooser */
.date-row{
  display:flex;
  gap:8px;
  overflow-x:auto;
  padding-bottom:4px;
  margin-top:6px;
}
.date-chip{
  min-width:64px;
  border-radius:16px;
  padding:6px 6px;
  background:#e5f0ff;
  text-align:center;
  font-size:11px;
  cursor:pointer;
}
.date-chip strong{
  display:block;
  font-size:13px;
}
.date-chip.active{
  background:#1d4ed8;
  color:#fff;
}

.time-grid{
  display:grid;
  grid-template-columns:repeat(4,minmax(0,1fr));
  gap:6px;
  margin-top:8px;
}
.time-btn{
  padding:7px 4px;
  border-radius:999px;
  border:none;
  font-size:11px;
  background:#e5f0ff;
  cursor:pointer;
}
.time-btn.selected{
  background:#22c55e;
  color:#fff;
}
.time-btn.disabled{
  background:#e5e7eb;
  color:#9ca3af;
  cursor:not-allowed;
}

/* ==== SIMPLE LIST OF RESERVATIONS ==== */
.res-list{
  margin-top:8px;
  display:flex;
  flex-direction:column;
  gap:8px;
}
.res-item{
  border-radius:16px;
  background:#f1f5f9;
  padding:8px 10px;
  font-size:12px;
}
.res-item strong{
  display:block;
  font-size:13px;
}

/* ==== MINI FORMS (ADD) ==== */
.form-row{
  display:flex;
  gap:8px;
  margin-top:6px;
  flex-wrap:wrap;
}
.form-row input{
  flex:1;
  border-radius:10px;
  border:1px solid var(--border);
  padding:6px 8px;
  font-size:12px;
}
.form-row button{
  font-size:12px;
  padding:7px 10px;
  border-radius:10px;
  border:none;
  background:#1d4ed8;
  color:#fff;
  cursor:pointer;
}

/* ==== TOAST ==== */
.toast{
  position:absolute;
  left:50%;
  bottom:18px;
  transform:translateX(-50%) translateY(120%);
  background:#111827;
  color:#f9fafb;
  padding:9px 14px;
  border-radius:999px;
  font-size:12px;
  display:flex;
  align-items:center;
  gap:8px;
  box-shadow:0 12px 30px rgba(15,23,42,.5);
  opacity:0;
  pointer-events:none;
  transition:.3s;
}
.toast.show{
  opacity:1;
  transform:translateX(-50%) translateY(0);
}
.toast span{font-size:15px}
</style>
</head>
<body>

<div class="app">
  <div class="phone">

    <div class="phone-header">
      Ahmet Tekeli Erkek Kuaf√∂r√º ‚Ä¢ Online Randevu
    </div>

    <!-- LOGIN SCREEN -->
    <div class="screen" id="screen-login">
      <div class="login-card">
        <div class="login-logo">
          <div class="logo-icon">‚úÇÔ∏è</div>
          <div class="logo-text">
            <strong>KUAF√ñR√úM</strong>
            <span>Ahmet Tekeli Randevu Sistemi</span>
          </div>
        </div>

        <h2>ƒ∞≈ületme Giri≈üi</h2>
        <p>Ahmet Tekeli erkek kuaf√∂r√ºn√º y√∂netin, randevularƒ±nƒ±zƒ± ve √ßalƒ±≈üanlarƒ±nƒ±zƒ± tek panelden kontrol edin.</p>

        <div class="field">
          <div class="field-label">E-posta Adresi</div>
          <div class="field-inner">
            <span>üìß</span>
            <input type="email" id="login-email" placeholder="E-posta Adresi">
          </div>
        </div>

        <div class="field">
          <div class="field-label">≈ûifre</div>
          <div class="field-inner">
            <span>üîí</span>
            <input type="password" id="login-password" placeholder="≈ûifre">
          </div>
        </div>

        <div class="login-bottom-row">
          <span></span>
          <a href="javascript:void(0)">≈ûifremi Unuttum?</a>
        </div>

        <button class="btn btn-primary" id="btn-login">
          <span>Giri≈ü Yap</span>
        </button>
      </div>

      <div class="login-footer">
        <span>ƒ∞≈ületme Giri≈üi</span>
        <a href="javascript:void(0)">Kayƒ±t Ol</a>
      </div>
    </div>

    <!-- DASHBOARD SCREEN -->
    <div class="screen hidden" id="screen-dashboard">
      <div class="appbar">
        <div class="appbar-title">
          <small>ƒ∞≈ületme Paneli</small>
          <strong>Ahmet Tekeli Kuaf√∂r</strong>
        </div>
        <div class="appbar-actions">
          <button class="icon-btn" id="btn-bell">
            <span>üîî</span>
            <div class="badge" id="badge-notif">0</div>
          </button>
          <button class="icon-btn logout" id="btn-logout" title="√áƒ±kƒ±≈ü">
            <span>‚èèÔ∏è</span>
          </button>
        </div>
      </div>

      <div class="tabs">
        <button class="tab-btn active" data-tab="rez">
          <span class="icon">üìÖ</span><span>Rezervasyon</span>
        </button>
        <button class="tab-btn" data-tab="staff">
          <span class="icon">üë•</span><span>Elemanlar</span>
        </button>
        <button class="tab-btn" data-tab="services">
          <span class="icon">‚úÇÔ∏è</span><span>Hizmetler</span>
        </button>
        <button class="tab-btn" data-tab="products">
          <span class="icon">üõçÔ∏è</span><span>√úr√ºnler</span>
        </button>
        <button class="tab-btn" data-tab="settings">
          <span class="icon">‚öôÔ∏è</span><span>Ayarlar</span>
        </button>
      </div>

      <!-- === REZERVASYON TAB === -->
      <div id="tab-rez" class="tab-content">
        <div class="section">
          <div class="section-title">Rezervasyon Yapalƒ±m</div>
          <div class="section-sub">Eleman, hizmet ve isteƒüe g√∂re √ºr√ºn se√ßerek m√º≈üteriniz i√ßin hƒ±zlƒ±ca randevu olu≈üturun.</div>

          <!-- Staff chooser -->
          <div class="section-sub" style="margin-top:4px;margin-bottom:4px;font-weight:500;">
            Eleman Se√ß
          </div>
          <div class="staff-chooser" id="rez-staff"></div>

          <!-- Service chooser -->
          <div class="section-sub" style="margin-top:10px;margin-bottom:6px;font-weight:500;">
            Hizmet Se√ß
          </div>
          <div class="grid-2" id="rez-services"></div>

          <!-- Product chooser -->
          <div class="section-sub" style="margin-top:12px;margin-bottom:6px;font-weight:500;">
            √úr√ºnler (Opsiyonel)
          </div>
          <div class="grid-2" id="rez-products"></div>

          <!-- Total -->
          <div class="total-box" id="rez-total">
            <span>Toplam √úcret</span>
            <strong>‚Ç∫0.00</strong>
          </div>
        </div>

        <!-- Date / time -->
        <div class="section">
          <div class="section-title">Tarih Se√ßin</div>
          <div class="date-row" id="rez-dates"></div>

          <div class="section-title" style="margin-top:10px;">Saat Se√ßin</div>
          <div class="time-grid" id="rez-times"></div>

          <button class="btn btn-primary" style="margin-top:14px;width:100%;" id="btn-create-res">
            REZERVASYON YAP
          </button>
        </div>

        <!-- list of reservations -->
        <div class="section">
          <div class="section-title">Bug√ºnk√º Randevular</div>
          <div class="res-list" id="res-list"></div>
        </div>
      </div>

      <!-- === STAFF TAB === -->
      <div id="tab-staff" class="tab-content hidden">
        <div class="section">
          <div class="section-title">Elemanlar</div>
          <div class="section-sub">Eklediƒüiniz berberleri m√º≈üteriler randevu olu≈ütururken se√ßebilir.</div>

          <div class="info-banner">
            <div class="info-icon">‚ÑπÔ∏è</div>
            <div>Elemanlara hangi hizmetleri verdiƒüini eklemeyi unutmayƒ±n. Rezervasyon ekranƒ±nda ona g√∂re g√∂sterilir.</div>
          </div>

          <div id="staff-list"></div>

          <div class="section-sub" style="margin-top:12px;font-weight:500;">Yeni Eleman Ekle</div>
          <div class="form-row">
            <input type="text" id="new-staff-name" placeholder="Ad Soyad">
            <input type="text" id="new-staff-services" placeholder="Verdiƒüi hizmetler (virg√ºlle)">
            <button id="btn-add-staff">Ekle</button>
          </div>
        </div>
      </div>

      <!-- === SERVICES TAB === -->
      <div id="tab-services" class="tab-content hidden">
        <div class="section">
          <div class="section-title">Hizmetler</div>
          <div class="section-sub">Fiyat ve s√ºreleri belirleyin. Rezervasyon s√ºresi otomatik hesaplanƒ±r.</div>

          <div class="grid-2" id="services-list"></div>

          <div class="section-sub" style="margin-top:12px;font-weight:500;">Yeni Hizmet Ekle</div>
          <div class="form-row">
            <input type="text" id="new-service-name" placeholder="Hizmet Adƒ±">
            <input type="number" id="new-service-price" placeholder="Fiyat (‚Ç∫)">
            <input type="number" id="new-service-duration" placeholder="S√ºre (dk)">
            <button id="btn-add-service">Ekle</button>
          </div>
        </div>
      </div>

      <!-- === PRODUCTS TAB === -->
      <div id="tab-products" class="tab-content hidden">
        <div class="section">
          <div class="section-title">√úr√ºnler</div>
          <div class="section-sub">Randevu sƒ±rasƒ±nda m√º≈üteriye sunacaƒüƒ±nƒ±z √ºr√ºnleri ve stok durumlarƒ±nƒ± y√∂netin.</div>

          <div class="info-banner red">
            <div class="info-icon">‚ö†Ô∏è</div>
            <div>Stok azalan √ºr√ºnleri kontrol edip rafƒ± doldurmayƒ± unutmayƒ±n.</div>
          </div>

          <div class="grid-2" id="products-list"></div>

          <div class="section-sub" style="margin-top:12px;font-weight:500;">Yeni √úr√ºn Ekle</div>
          <div class="form-row">
            <input type="text" id="new-product-name" placeholder="√úr√ºn Adƒ±">
            <input type="number" id="new-product-price" placeholder="Fiyat (‚Ç∫)">
            <input type="number" id="new-product-stock" placeholder="Stok">
            <button id="btn-add-product">Ekle</button>
          </div>
        </div>
      </div>

      <!-- === SETTINGS TAB === -->
      <div id="tab-settings" class="tab-content hidden">
        <div class="section">
          <div class="section-title">ƒ∞≈ületme Ayarlarƒ±</div>
          <div class="section-sub">√áalƒ±≈üma saatleri, a√ßƒ±k/kapalƒ± g√ºnler ve temel i≈ületme bilgilerini ayarlayƒ±n.</div>

          <div class="hours-list" id="hours-list"></div>
        </div>
      </div>

    </div>

    <!-- TOAST -->
    <div class="toast" id="toast">
      <span>‚úÖ</span>
      <div id="toast-text">Randevu olu≈üturuldu.</div>
    </div>

  </div>
</div>

<script>
const state = {
  staff:[
    {id:1,name:"Ahmet Tekeli", services:["Sa√ß Sakal Kesimi","Sa√ß Kesimi","Damat Tra≈üƒ±"]},
    {id:2,name:"Ali", services:["Sa√ß Kesimi","Sakal Kesimi","√áocuk Sa√ß Kesimi"]}
  ],
  services:[
    {id:1,name:"Sa√ß Sakal Kesimi",price:450,duration:60},
    {id:2,name:"Sa√ß Kesimi",price:250,duration:30},
    {id:3,name:"Sakal Kesimi",price:150,duration:20},
    {id:4,name:"Damat Tra≈üƒ±",price:1250,duration:90},
    {id:5,name:"√áocuk Sa√ß Kesimi",price:200,duration:30}
  ],
  products:[
    {id:1,name:"TIRA≈û SETƒ∞",price:2500,stock:2},
    {id:2,name:"≈ûekillendirici Jel",price:600,stock:6}
  ],
  workingHours:{
    "Pazartesi": {open:true,start:"09:00",end:"19:00"},
    "Salƒ±": {open:true,start:"09:00",end:"19:00"},
    "√áar≈üamba": {open:true,start:"09:00",end:"19:00"},
    "Per≈üembe": {open:true,start:"09:00",end:"19:00"},
    "Cuma": {open:true,start:"09:00",end:"19:00"},
    "Cumartesi": {open:true,start:"09:00",end:"19:00"},
    "Pazar": {open:true,start:"09:00",end:"19:00"}
  },
  reservations:[],
  notifications:0,
  selectedStaff:null,
  selectedServices:new Set(),
  selectedProducts:new Set(),
  selectedDate:null,
  selectedTime:null
};

/* ==== HELPERS ==== */
function $(sel){return document.querySelector(sel);}
function create(el,cls){const e=document.createElement(el); if(cls)e.className=cls; return e;}

function showToast(msg){
  const t=$("#toast");
  $("#toast-text").textContent=msg;
  t.classList.add("show");
  setTimeout(()=>t.classList.remove("show"),2500);
}

/* ==== LOGIN ==== */
$("#btn-login").addEventListener("click",()=>{
  const email=$("#login-email").value.trim();
  const pass=$("#login-password").value.trim();
  if(!email || !pass){
    showToast("E-posta ve ≈üifre girin.");
    return;
  }
  $("#screen-login").classList.add("hidden");
  $("#screen-dashboard").classList.remove("hidden");
});

$("#btn-logout").addEventListener("click",()=>{
  $("#screen-dashboard").classList.add("hidden");
  $("#screen-login").classList.remove("hidden");
});

/* ==== TABS ==== */
document.querySelectorAll(".tab-btn").forEach(btn=>{
  btn.addEventListener("click",()=>{
    document.querySelectorAll(".tab-btn").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    const t=btn.getAttribute("data-tab");
    document.querySelectorAll(".tab-content").forEach(sec=>sec.classList.add("hidden"));
    $("#tab-"+t).classList.remove("hidden");
  });
});

/* ==== STAFF RENDER ==== */
function renderStaffAdmin(){
  const wrap=$("#staff-list");
  wrap.innerHTML="";
  state.staff.forEach(s=>{
    const card=create("div","staff-card");
    const head=create("div","staff-header");
    const av=create("div","staff-avatar");
    av.textContent=s.name.charAt(0);
    const name=create("div","staff-name");
    name.textContent=s.name;
    head.appendChild(av);head.appendChild(name);
    card.appendChild(head);

    const servWrap=create("div","staff-services");
    s.services.forEach(h=>{
      const pill=create("div","pill");
      pill.textContent=h;
      servWrap.appendChild(pill);
    });
    card.appendChild(servWrap);

    const actions=create("div","card-actions");
    const edit=create("button","btn-xs edit");
    edit.textContent="D√ºzenle";
    edit.onclick=()=>{ 
      const yeni=prompt("Eleman adƒ±",s.name)||s.name;
      const serv=prompt("Hizmetleri virg√ºlle yaz",s.services.join(", "));
      s.name=yeni;
      if(serv) s.services=serv.split(",").map(x=>x.trim()).filter(Boolean);
      renderAll();
    };
    const del=create("button","btn-xs delete");
    del.textContent="Sil";
    del.onclick=()=>{
      if(confirm("Silinsin mi?")){ 
        state.staff=state.staff.filter(x=>x.id!==s.id);
        if(state.selectedStaff===s.id) state.selectedStaff=null;
        renderAll();
      }
    };
    actions.appendChild(edit);actions.appendChild(del);
    card.appendChild(actions);
    wrap.appendChild(card);
  });
}
$("#btn-add-staff").addEventListener("click",()=>{
  const n=$("#new-staff-name").value.trim();
  const s=$("#new-staff-services").value.trim();
  if(!n)return;
  const arr=s?s.split(",").map(x=>x.trim()).filter(Boolean):[];
  state.staff.push({id:Date.now(),name:n,services:arr});
  $("#new-staff-name").value="";
  $("#new-staff-services").value="";
  renderAll();
});

/* ==== SERVICES ==== */
function renderServicesAdmin(){
  const wrap=$("#services-list");
  wrap.innerHTML="";
  state.services.forEach(s=>{
    const card=create("div","service-card");
    const icon=create("div","service-icon");
    icon.textContent="‚úÇÔ∏è";
    const name=create("div","service-name");
    name.textContent=s.name;
    const price=create("div","service-price");
    price.textContent=`‚Ç∫${s.price.toFixed(2)}`;
    const dur=create("div","service-duration");
    dur.textContent=`S√ºre: ${s.duration} dk`;
    card.appendChild(icon);card.appendChild(name);card.appendChild(price);card.appendChild(dur);
    card.onclick=()=>{
      const yeniAd=prompt("Hizmet adƒ±",s.name)||s.name;
      const fiyat=parseFloat(prompt("Fiyat",s.price)||s.price);
      const sure=parseInt(prompt("S√ºre (dk)",s.duration)||s.duration,10);
      s.name=yeniAd;
      if(!isNaN(fiyat))s.price=fiyat;
      if(!isNaN(sure))s.duration=sure;
      renderAll();
    };
    wrap.appendChild(card);
  });
}
$("#btn-add-service").addEventListener("click",()=>{
  const name=$("#new-service-name").value.trim();
  const price=parseFloat($("#new-service-price").value||"0");
  const dur=parseInt($("#new-service-duration").value||"30",10);
  if(!name)return;
  state.services.push({id:Date.now(),name,price:isNaN(price)?0:price,duration:isNaN(dur)?30:dur});
  $("#new-service-name").value="";
  $("#new-service-price").value="";
  $("#new-service-duration").value="";
  renderAll();
});

/* ==== PRODUCTS ==== */
function renderProductsAdmin(){
  const wrap=$("#products-list");
  wrap.innerHTML="";
  state.products.forEach(p=>{
    const card=create("div","product-card");
    const thumb=create("div","product-thumb");
    thumb.textContent="üß¥";
    const name=create("div","product-name");
    name.textContent=p.name;
    const price=create("div","product-price");
    price.textContent=`‚Ç∫${p.price.toFixed(2)}`;
    const stock=create("div","product-stock");
    stock.textContent=`Stok: ${p.stock}`;
    if(p.stock<=2){
      const b=create("div","badge-sm");
      b.textContent="Azalƒ±yor";
      card.appendChild(b);
    }
    card.appendChild(thumb);card.appendChild(name);card.appendChild(price);card.appendChild(stock);
    card.onclick=()=>{
      const yeniAd=prompt("√úr√ºn adƒ±",p.name)||p.name;
      const fiyat=parseFloat(prompt("Fiyat",p.price)||p.price);
      const stok=parseInt(prompt("Stok",p.stock)||p.stock,10);
      p.name=yeniAd;
      if(!isNaN(fiyat))p.price=fiyat;
      if(!isNaN(stok))p.stock=stok;
      renderAll();
    };
    wrap.appendChild(card);
  });
}
$("#btn-add-product").addEventListener("click",()=>{
  const name=$("#new-product-name").value.trim();
  const price=parseFloat($("#new-product-price").value||"0");
  const stock=parseInt($("#new-product-stock").value||"0",10);
  if(!name)return;
  state.products.push({id:Date.now(),name,price:isNaN(price)?0:price,stock:isNaN(stock)?0:stock});
  $("#new-product-name").value="";
  $("#new-product-price").value="";
  $("#new-product-stock").value="";
  renderAll();
});

/* ==== HOURS ==== */
function renderHours(){
  const wrap=$("#hours-list");
  wrap.innerHTML="";
  Object.entries(state.workingHours).forEach(([day,obj])=>{
    const row=create("div","hour-row");
    const left=create("div","hour-left");
    left.innerHTML=`<strong>${day}</strong>`;
    const time=create("div","hour-time");
    time.textContent=`${obj.start} - ${obj.end}`;
    left.appendChild(time);
    const btn=create("button","hour-toggle "+(obj.open?"on":"off"));
    btn.textContent=obj.open?"A√ßƒ±k":"Kapalƒ±";
    btn.onclick=()=>{
      obj.open=!obj.open;
      renderAll();
    };
    row.appendChild(left);row.appendChild(btn);
    row.onclick=(e)=>{
      if(e.target===btn)return;
      const start=prompt(day+" i√ßin ba≈ülangƒ±√ß saati",obj.start)||obj.start;
      const end=prompt(day+" i√ßin biti≈ü saati",obj.end)||obj.end;
      obj.start=start;obj.end=end;
      renderAll();
    };
    wrap.appendChild(row);
  });
}

/* ==== REZERVASYON FLOW ==== */
function renderRezStaff(){
  const wrap=$("#rez-staff");
  wrap.innerHTML="";
  state.staff.forEach(s=>{
    const pill=create("div","staff-pill");
    if(state.selectedStaff===null) state.selectedStaff=s.id; // default
    if(state.selectedStaff===s.id) pill.classList.add("active");
    pill.innerHTML=`<span>Eleman</span><strong>${s.name}</strong>`;
    pill.onclick=()=>{
      state.selectedStaff=s.id;
      renderRezStaff();
    };
    wrap.appendChild(pill);
  });
}

function renderRezServices(){
  const wrap=$("#rez-services");
  wrap.innerHTML="";
  state.services.forEach(s=>{
    const card=create("div","service-card");
    if(state.selectedServices.has(s.id))card.classList.add("selected");
    card.innerHTML=`
      <div class="service-icon">‚úÇÔ∏è</div>
      <div class="service-name">${s.name}</div>
      <div class="service-price">‚Ç∫${s.price.toFixed(2)}</div>
      <div class="service-duration">${s.duration} dk</div>`;
    card.onclick=()=>{
      if(state.selectedServices.has(s.id)) state.selectedServices.delete(s.id);
      else state.selectedServices.add(s.id);
      renderRezServices();
      updateTotal();
    };
    wrap.appendChild(card);
  });
}

function renderRezProducts(){
  const wrap=$("#rez-products");
  wrap.innerHTML="";
  state.products.forEach(p=>{
    const card=create("div","product-card");
    if(state.selectedProducts.has(p.id))card.classList.add("selected");
    if(p.stock<=2){
      const b=create("div","badge-sm");
      b.textContent="Azalƒ±yor";
      card.appendChild(b);
    }
    card.innerHTML+=`
      <div class="product-thumb">üß¥</div>
      <div class="product-name">${p.name}</div>
      <div class="product-price">‚Ç∫${p.price.toFixed(2)}</div>
      <div class="product-stock">Stok: ${p.stock}</div>`;
    card.onclick=()=>{
      if(state.selectedProducts.has(p.id)) state.selectedProducts.delete(p.id);
      else state.selectedProducts.add(p.id);
      renderRezProducts();
      updateTotal();
    };
    wrap.appendChild(card);
  });
}

function renderRezDates(){
  const wrap=$("#rez-dates");
  wrap.innerHTML="";
  const today=new Date();
  for(let i=0;i<7;i++){
    const d=new Date(today);
    d.setDate(d.getDate()+i);
    const day=d.getDate();
    const month=d.toLocaleString("tr-TR",{month:"short"}).toUpperCase();
    const weekday=d.toLocaleString("tr-TR",{weekday:"short"}).toUpperCase();
    const key=d.toISOString().slice(0,10);
    if(!state.selectedDate) state.selectedDate=key;
    const chip=create("div","date-chip");
    if(state.selectedDate===key)chip.classList.add("active");
    chip.innerHTML=`<strong>${day}</strong>${month}<br>${weekday}`;
    chip.onclick=()=>{state.selectedDate=key;renderRezDates();renderRezTimes();renderResList();};
    wrap.appendChild(chip);
  }
}

function renderRezTimes(){
  const wrap=$("#rez-times");
  wrap.innerHTML="";
  const times=["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00"];
  const taken=new Set(state.reservations.filter(r=>r.date===state.selectedDate).map(r=>r.time));
  times.forEach(t=>{
    const btn=create("button","time-btn");
    if(taken.has(t)){
      btn.classList.add("disabled");
    }
    if(state.selectedTime===t) btn.classList.add("selected");
    btn.textContent=t;
    btn.onclick=()=>{
      if(btn.classList.contains("disabled"))return;
      state.selectedTime=t;
      renderRezTimes();
    };
    wrap.appendChild(btn);
  });
}

function updateTotal(){
  let total=0;
  state.selectedServices.forEach(id=>{
    const s=state.services.find(x=>x.id===id);
    if(s)total+=s.price;
  });
  state.selectedProducts.forEach(id=>{
    const p=state.products.find(x=>x.id===id);
    if(p)total+=p.price;
  });
  $("#rez-total strong").textContent="‚Ç∫"+total.toFixed(2);
}

/* create reservation */
$("#btn-create-res").addEventListener("click",()=>{
  if(!state.selectedStaff){showToast("Eleman se√ßin.");return;}
  if(state.selectedServices.size===0){showToast("En az bir hizmet se√ßin.");return;}
  if(!state.selectedDate){showToast("Tarih se√ßin.");return;}
  if(!state.selectedTime){showToast("Saat se√ßin.");return;}

  const staff=state.staff.find(s=>s.id===state.selectedStaff);
  const serviceNames=[...state.selectedServices].map(id=>state.services.find(s=>s.id===id)?.name).join(", ");
  const totalText=$("#rez-total strong").textContent;

  state.reservations.push({
    id:Date.now(),
    date:state.selectedDate,
    time:state.selectedTime,
    staffName:staff?staff.name:"",
    services:serviceNames,
    total:totalText
  });
  state.notifications++;
  $("#badge-notif").textContent=state.notifications;

  showToast("Randevu olu≈üturuldu.");
  // reset time selection (slot dolu olsun)
  state.selectedTime=null;
  renderRezTimes();
  renderResList();
});

/* render reservations list for selected day */
function renderResList(){
  const wrap=$("#res-list");
  wrap.innerHTML="";
  const todays=state.reservations.filter(r=>r.date===state.selectedDate).sort((a,b)=>a.time.localeCompare(b.time));
  if(todays.length===0){
    const p=create("div","section-sub");
    p.style.marginTop="4px";
    p.textContent="Bu g√ºn i√ßin hen√ºz randevu yok.";
    wrap.appendChild(p);
    return;
  }
  todays.forEach(r=>{
    const item=create("div","res-item");
    item.innerHTML=`
      <strong>${r.time} ‚Ä¢ ${r.staffName}</strong>
      <div>${r.services}</div>
      <div>${r.total}</div>
    `;
    wrap.appendChild(item);
  });
}

/* ==== NOTIFICATION BUTTON ==== */
$("#btn-bell").addEventListener("click",()=>{
  if(state.notifications===0){
    showToast("Yeni bildirim yok.");
  }else{
    showToast(state.notifications+" yeni randevu bildirimi.");
    state.notifications=0;
    $("#badge-notif").textContent="0";
  }
});

/* ==== MASTER RENDER ==== */
function renderAll(){
  renderStaffAdmin();
  renderServicesAdmin();
  renderProductsAdmin();
  renderHours();
  renderRezStaff();
  renderRezServices();
  renderRezProducts();
  renderRezDates();
  renderRezTimes();
  updateTotal();
  renderResList();
}
renderAll();
</script>

</body>
</html>
